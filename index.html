<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>DMDB SYSTEMS PRO</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/@deriv/deriv-api/dist/DerivAPIBasic.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #0d1117; color: white; text-align: center; padding: 40px; }
    h1 { color: #ff444f; font-size: 42px; margin-bottom: 10px; }
    p { color: #8b949e; margin-bottom: 40px; }
    
    /* BOUTONS PARTENAIRES */
    .auth-buttons { margin-bottom: 30px; padding-bottom: 30px; border-bottom: 1px solid #30363d; }
    .auth-buttons a { display: inline-block; margin: 10px; padding: 15px 25px; background: #2962ff; color: white; border-radius: 8px; text-decoration: none; font-weight: bold; }
    .auth-buttons a:hover { background: #0039cb; }
    
    /* DASHBOARD */
    .buttons button { margin: 6px; padding: 12px 22px; background: #00c853; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    .buttons button:hover { opacity: 0.9; }
    
    /* CONSOLE */
    pre { text-align: left; background: #161b22; padding: 20px; border-radius: 8px; margin-top: 20px; border: 1px solid #30363d; color: #00ff00; font-family: monospace; overflow-x: auto; }
  </style>
</head>
<body>

  <h1>ðŸš€ DMDB SYSTEMS PRO</h1>
  <p>Terminal de Trading & Affiliation</p>

  <div class="auth-buttons">
    <a href="https://deriv.partners/rx?sidc=9823769E-0309-4002-8042-D9A560322347&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU205810" target="_blank">ðŸ”‘ Connexion / Inscription</a>
    <a href="https://deriv.partners/rx?sidc=3C4560A7-872E-4581-B3A3-FA9B370807A9&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU205810" target="_blank">ðŸ’¼ Compte Turnover</a>
  </div>

  <div class="buttons">
    <button id="btn-connect">Connect API</button>
    <button id="btn-balance">Balance</button>
    <button id="btn-symbols">MarchÃ©s</button>
    <button id="btn-ticks">Prix R_100</button>
  </div>

  <pre id="out">SystÃ¨me en attente...</pre>

  <script>
    // --- VOTRE APP ID ---
    const app_id = 118972; 
    
    // Connexion WebSocket
    const connection = new WebSocket(`wss://ws.derivws.com/websockets/v3?app_id=${app_id}`);
    const api = new DerivAPIBasic({ connection });
    const out = document.getElementById("out");

    // 1. Connexion
    document.getElementById("btn-connect").addEventListener("click", () => {
      out.innerText = "Connexion aux serveurs...";
      api.ping().then(r => {
        out.innerText = "ConnectÃ© avec succÃ¨s ! Ping: " + r.ping + "ms";
      });
    });

    // 2. Balance (nÃ©cessite token, mais on met le placeholder)
    document.getElementById("btn-balance").addEventListener("click", () => {
      out.innerText = "Veuillez vous connecter via le bouton bleu ci-dessus pour voir votre solde.";
    });

    // 3. MarchÃ©s
    document.getElementById("btn-symbols").addEventListener("click", async () => {
      out.innerText = "Chargement des marchÃ©s...";
      const r = await api.activeSymbols({ active_symbols: 'brief', product_type: 'basic' });
      out.innerText = "MarchÃ©s actifs : " + r.active_symbols.length + " trouvÃ©s.\nExemple: " + r.active_symbols[0].symbol;
    });
    
    // 4. Prix en direct
    document.getElementById("btn-ticks").addEventListener("click", () => {
      out.innerText = "Flux R_100 activÃ©...";
      api.subscribe({ ticks: "R_100" });
      connection.addEventListener("message", (e) => {
        const d = JSON.parse(e.data);
        if(d.tick) out.innerText = `PRIX R_100: ${d.tick.quote} (Epoch: ${d.tick.epoch})`;
      });
    });
  </script>
</body>
</html>
